webpackJsonp([1,2],Array(19).concat([function(t,e,n){"use strict";var r=n(8),o=n.n(r),a=n(55),s=n.n(a),c=n(54),i=window.fetch;e.a=function(t,e){return i(s()(t),e?o()({},{headers:n.i(c.a)(e.headers)},e||{}):{headers:{Accept:"application/json"}})}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var r="SET_TOKEN",o="FETCH_PROJECT",a="FETCH_REPORT"},,,,,,,,,,,,,function(t,e,n){n(103);var r=n(7)(null,n(111),null,null);t.exports=r.exports},,function(t,e,n){"use strict";var r=n(12),o=n.n(r),a=n(34),s=n(63),c=n(60),i=n(62),u=n(61);o.a.use(a.c),e.a=new a.c.Store({state:s.a,actions:c.a,mutations:i.a,modules:{projects:u.a}})},,,,,,,,,,,,function(t,e,n){"use strict";var r=n(12),o=n.n(r),a=n(114),s=n(35);o.a.use(a.a);var c=new a.a({routes:[n(59),n(57),n(58)]});c.beforeEach(function(t,e,n){s.a.state.token||"token"===t.name?n():n({name:"token"})}),e.a=c},function(t,e,n){var r=n(7)(n(50),n(113),null,null);t.exports=r.exports},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",components:{"page-header":n(104)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),o=n(19);e.default={data:function(){return{fetching:!0}},computed:n.i(r.b)({projects:"projectOverview"}),components:{container:n(33)},mounted:function(){var t=this;0===this.$store.state.projects.all.length?n.i(o.a)("projects").then(function(t){if(200===t.status)return t.json();throw new Error(t)}).then(function(e){return t.$store.dispatch("fetchProject",e)}).then(function(){return t.fetching=!1}).catch(function(){localStorage.removeItem("api-token"),t.$router.replace({name:"token"})}):this.fetching=!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n.n(r),a=n(67),s=n.n(a),c=n(34),i=n(33),u=n.n(i),p=n(19),l=n(56),f=this;e.default={data:function(){return{fetching:!0,project:null,reports:[]}},computed:s()({badge:function(){var t=this.$route.params,e="github"===t.host?"gh":"bb";return"https://circleci.com/"+e+"/"+t.owner+"/"+t.project+"/tree/master.svg?style=svg&circle-token="+this.token}},n.i(c.a)(["token"]),n.i(c.b)({projects:"projectOverview"})),components:{container:u.a},mounted:function(){var t=this.$route.params;this.displayReport(t)},watch:{$route:function(t){f.displayReport(t)}},methods:{titleReport:function(t){var e=t.replace("$CIRCLE_ARTIFACTS/","").replace("/index.html","");return""+e.charAt(0).toUpperCase()+e.substr(1)},displayReport:function(t){var e=this,r=this.$store.state.projects.reports,a=function(){e.fetching=!1;var n=e.projects.filter(function(e){return e.name===t.project});e.project=n[0];var r=e.$store.state.projects.reports[t.host][t.owner][t.project][t.build].filter(function(t){return t.path.endsWith("index.html")}),o=1/0;r.forEach(function(t){var e=t.pretty_path.split("/").length;e<o&&(o=e)}),e.reports=r.filter(function(t){return t.pretty_path.split("/").length===o})};n.i(l.a)(r,t)||n.i(p.a)("project/"+t.host+"/"+t.owner+"/"+t.project+"/"+t.build+"/artifacts").then(function(t){if(200===t.status)return t.json();throw new Error(t)}).then(function(n){return e.$store.dispatch("fetchReport",o()({},t,{data:n}))}).then(function(){return a()})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(33),o=n.n(r);e.default={data:function(){return{token:""}},components:{container:o.a},methods:{submit:function(){localStorage.setItem("api-token",this.token),this.$store.dispatch("saveToken",this.token),this.$router.replace({name:"home"})}}}},function(t,e,n){"use strict";var r=n(8),o=n.n(r),a=n(68),s=n.n(a);e.a=function(t){return t instanceof Headers?void t.set("Accept","application/json"):t&&"object"===("undefined"==typeof t?"undefined":s()(t))?o()({},{Accept:"application/json"},t):{Accept:"application/json"}}},function(t,e,n){"use strict";t.exports=function(t){var e=localStorage.getItem("api-token"),n=new URL(t,"https://circleci.com/api/v1.1/");return n.toString()+"?circle-token="+e}},function(t,e,n){"use strict";function r(t,e){var n=t[e.host];if(!(e.owner in n))return!1}e.a=r},function(t,e,n){"use strict";t.exports={path:"/",name:"home",component:n(105)}},function(t,e,n){"use strict";t.exports={path:"/report/:host/:owner/:project/:build",name:"report",component:n(106)}},function(t,e,n){"use strict";t.exports={path:"/token",name:"token",component:n(107)}},function(t,e,n){"use strict";var r=n(20);e.a={saveToken:function(t,e){var n=t.commit;n(r.c,e)}}},function(t,e,n){"use strict";function r(t,e){if(!e)return"success";if(t&&t.build_num>e.build_num)return"success";var n=e.outcome;return p.indexOf(n)!==-1?"warn":"fail"}var o,a=n(36),s=n.n(a),c=n(8),i=n.n(c),u=n(20),p=["canceled","no_tests"],l={all:[],reports:{bitbucket:{},github:{}}},f=(o={},s()(o,u.a,function(t,e){t.all=e}),s()(o,u.b,function(t,e){var n=e.host,r=e.owner,o=e.project,a=e.build,c=e.data;t.reports=i()({},t.reports,s()({},n,s()({},r,s()({},o,s()({},a,c)))))}),o),d={fetchProject:function(t,e){var n=t.commit;n(u.a,e)},fetchReport:function(t,e){var n=t.commit;n(u.b,e)}},m={allProject:function(t){return t.all},projectOverview:function(t,e){return e.allProject.map(function(t){var e=t.branches.master.last_success,n=t.branches.master.last_non_success,o=r(e,n),a="success"===o?e:n,s={name:"report",params:{host:t.vcs_type,owner:t.username,project:t.reponame,build:a.build_num}};return{status:o,report:s,commit:a.vcs_revision.substr(0,6),icon:t.vcs_type,name:t.reponame,build:a.build_num,url:t.vcs_url}})}};e.a={state:l,mutations:f,actions:d,getters:m}},function(t,e,n){"use strict";var r=n(36),o=n.n(r),a=n(20);e.a=o()({},a.c,function(t,e){t.token=e})},function(t,e,n){"use strict";var r=localStorage.getItem("api-token");e.a={token:r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e,n){n(101);var r=n(7)(null,n(109),"data-v-09f4815e",null);t.exports=r.exports},function(t,e,n){n(102);var r=n(7)(n(51),n(110),"data-v-0fdc74f0",null);t.exports=r.exports},function(t,e,n){var r=n(7)(n(52),n(108),null,null);t.exports=r.exports},function(t,e,n){var r=n(7)(n(53),n(112),null,null);t.exports=r.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("container",[t.fetching?n("br"):t._e(),t._v(" "),t.fetching?n("md-spinner",{attrs:{"md-indeterminate":""}}):t._e(),t._v(" "),null!==t.project?n("div",{staticClass:"md-title"},[n("h2",[t._v("\n            "+t._s(t.project.name)+"\n            #"+t._s(t.$route.params.build)+"\n            "),n("a",{attrs:{href:t.project.url,target:"_blank"}},[n("i",{staticClass:"fa",class:"fa-"+t.$route.params.host})]),t._v(" "),t.badge?n("img",{attrs:{src:t.badge}}):t._e()])]):t._e(),t._v(" "),null!==t.project?n("md-card",[t.reports.length>0?n("md-list",t._l(t.reports,function(e){return n("md-list-item",{attrs:{href:e.url,target:"_blank"}},[t._v("\n                "+t._s(t.titleReport(e.pretty_path))+"\n                "),n("md-icon",[t._v("send")])],1)})):t._e()],1):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-toolbar",[n("h1",{staticClass:"md-title"},[n("router-link",{attrs:{to:{name:"home"}}},[t._v("\n            Circle CI Dashboard\n        ")])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("container",[n("h2",[t._v("Projects")]),t._v(" "),t.fetching?n("br"):t._e(),t._v(" "),t.fetching?n("md-progress",{attrs:{"md-indeterminate":""}}):t._e(),t._v(" "),t._l(t.projects,function(e){return n("md-card",{staticClass:"md-primary",attrs:{"md-theme":e.status}},[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("\n                "+t._s(e.name)+"\n                "),n("i",{staticClass:"fa",class:["fa-"+e.icon]})]),t._v(" "),n("div",{staticClass:"md-subhead"},[t._v("\n                #"+t._s(e.build)+"\n                "+t._s(e.commit)+"\n            ")])]),t._v(" "),n("md-card-actions",["warn"!==e.status?n("md-button",{staticClass:"md-raised",attrs:{href:t.$router.resolve(e.report).href}},[t._v("\n                View Report\n            ")]):t._e()],1)],1)})],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("container",[n("h2",[t._v("Input Token")]),t._v(" "),n("form",{attrs:{novalidate:""},on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[n("md-input-container",[n("label",[t._v("Circle CI API Token")]),t._v(" "),n("md-input",{model:{value:t.token,callback:function(e){t.token=e}}})],1),t._v(" "),n("p",[t._v("\n      You may go to\n      "),n("a",{attrs:{href:"https://circleci.com/account/api",target:"_blank"}},[t._v("here")]),t._v("\n      to create a new API token\n    ")]),t._v(" "),n("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[t._v("\n      Submit\n    ")])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("page-header"),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)},staticRenderFns:[]}},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=n.n(r),a=n(49),s=n.n(a),c=n(48),i=n.n(c),u=n(47),p=n(35),l=n(19);o.a.use(s.a),o.a.material.registerTheme("default",{primary:"purple"}),o.a.material.registerTheme({success:{primary:"green"},fail:{primary:"red"},warn:{primary:"orange"}}),p.a.state.projects.all.length||n.i(l.a)("projects").then(function(t){if(200===t.status)return t.json();throw new Error(t)}).then(function(t){return p.a.dispatch("fetchProject",t)}).catch(function(){localStorage.removeItem("api-token"),u.a.replace({name:"token"})}),new o.a({el:"#app",router:u.a,store:p.a,template:"<App/>",components:{App:i.a}})}]),[117]);
//# sourceMappingURL=app.js.map